(function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],m=0,d=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var n=s("85ec"),a=s.n(n);a.a},1:function(e,t){},1823:function(e,t,s){},"1aea":function(e,t,s){},"2ef6":function(e,t,s){},3329:function(e,t,s){"use strict";var n=s("1aea"),a=s.n(n);a.a},"36f4":function(e,t,s){},"392e":function(e,t,s){"use strict";var n=s("2ef6"),a=s.n(n);a.a},"4a07":function(e,t,s){"use strict";var n=s("4c93"),a=s.n(n);a.a},"4c93":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header"),s("router-view"),s("Footer")],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"head"}},[s("b-navbar",{staticClass:"nav",attrs:{fixed:"top",toggleable:"lg",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{to:{path:"/home"}}},[e._v("DetriClass")]),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",[s("b-nav-item",{attrs:{to:{path:"/stats"}}},[e._v(" Statistiques")]),s("b-nav-item",{attrs:{to:{path:"/upload"}}},[e._v("Upload une image")]),s("b-nav-item",{attrs:{to:{path:"/classement"}}},[e._v("Classement")]),e.loginStatus?s("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("em",[e._v("Mon Compte")])]},proxy:!0}],null,!1,1491356892)},[s("b-dropdown-item",{attrs:{to:{path:"/profile"}}},[e._v("Profile")]),s("b-dropdown-item",{on:{click:e.logOut}},[e._v("Log Out")])],1):s("b-nav-item",{attrs:{to:{path:"/login"}}},[e._v("Login")])],1)],1)],1)],1)},o=[],l=s("5530"),u=s("2f62"),c={name:"Header",data:function(){return{}},methods:{logOut:function(){this.$store.commit("setLoginStatus",!1),this.$session.destroy(),this.$router.push("Home")}},computed:Object(l["a"])(Object(l["a"])({},Object(u["b"])({loginStatus:"getLoginStatus"})),{},{test:function(){return console.log(this.loginStatus),this.loginStatus}})},m=c,d=(s("abd7"),s("2877")),f=Object(d["a"])(m,i,o,!1,null,"56578080",null),p=f.exports,h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"foot"}},[s("div",[e._v("Projet fin d'année M1 TNSI 2019-2020")]),s("div",[e._v("Par Wangon Romain, Displaire Thomas, Tréhou Thomas, Larcy William, Cocquebert Stéphane, Cacheux Kévin")])])}],v={name:"Footer"},g=v,_=(s("9357"),Object(d["a"])(g,h,b,!1,null,"a6c9426a",null)),y=_.exports,w={name:"App",components:{Header:p,Footer:y},beforeMount:function(){this.$session.exists()&&this.$store.commit("setLoginStatus",!0)}},S=w,$=(s("034f"),Object(d["a"])(S,a,r,!1,null,null,null)),O=$.exports,x=s("0628"),j=s.n(x),D=s("1e18"),E=s("8c4f"),A=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("h1",[e._v("Bienvenue sur DetriClass")]),s("div",{staticClass:"underTitle"},[s("p",[e._v("Ce site permet de voir des statistiques sur le nombre de déchets sur les bords de routes")]),s("p",[e._v("Il permet aussi d'envoyer vos propres photos pour analyse")]),s("p",[e._v("Un classement peut aussi être consulté")])])])}],P={name:"HelloWorld",props:{msg:String}},k=P,q=(s("d37f"),Object(d["a"])(k,A,C,!1,null,"4d060c33",null)),I=q.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[e._v(" "+e._s(e.alertMessage)+" ")]),s("b-form",[s("b-form-group",{attrs:{id:"input-group-1",label:"Adresse e-mail :","label-for":"input-1"}},[s("b-form-input",{attrs:{id:"input-1",type:"email",required:"",placeholder:"Indiquez votre adresse e-mail"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),s("b-form-group",{attrs:{id:"input-group-2",label:"Mot de passe :","label-for":"input-2"}},[s("b-form-input",{attrs:{id:"input-2",type:"password",required:"",placeholder:"Indiquez votre mot de passe"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e.show?s("b-form-group",{attrs:{id:"input-group-3",label:"Nom :","label-for":"input-3"}},[s("b-form-input",{attrs:{id:"input-3",required:e.show},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),e.show?s("b-form-group",{attrs:{id:"input-group-4",label:"Prénom :","label-for":"input-4"}},[s("b-form-input",{attrs:{id:"input-4",required:e.show},model:{value:e.form.surname,callback:function(t){e.$set(e.form,"surname",t)},expression:"form.surname"}})],1):e._e(),e.show?s("b-form-group",{attrs:{id:"input-group-5",label:"Pseudo :","label-for":"input-5"}},[s("b-form-input",{attrs:{id:"input-5",required:e.show},model:{value:e.form.pseudo,callback:function(t){e.$set(e.form,"pseudo",t)},expression:"form.pseudo"}})],1):e._e(),s("b-button",{attrs:{variant:"primary"},on:{click:e.onSubmit}},[e._v("Se connecter")]),s("b-button",{attrs:{variant:"danger"},on:{click:e.onSign}},[e._v("S'inscrire")])],1)],1)},M=[],T=(s("b0c0"),s("d4ec")),F=s("bee2"),U="http://localhost:8080/",R=function(){function e(){Object(T["a"])(this,e)}return Object(F["a"])(e,null,[{key:"newUser",value:function(e){return n["default"].http.post("".concat(U,"API/users/registration"),e)}},{key:"login",value:function(e){return n["default"].http.post("".concat(U,"API/users/logging"),e)}},{key:"getClassement",value:function(){return n["default"].http.get("".concat(U,"API/users/classement"))}},{key:"getStatistics",value:function(){return n["default"].http.get("".concat(U,"API/users/stats"))}},{key:"postImage",value:function(e,t){var s={pseudo:t,image:e};return n["default"].http.post("".concat(U,"API/upload/send"),s)}}]),e}(),H={name:"Login",data:function(){return{form:{email:"",password:"",name:"",surname:"",pseudo:""},show:!1,showDismissibleAlert:!1,alertMessage:""}},methods:{onSubmit:function(){var e=this;this.show?this.show=!1:this.isFormValid?R.login(JSON.stringify({email:this.form.email,password:this.form.password})).then((function(t){200===t.status&&(e.$session.start(),e.$session.set("email",t.body.email),e.$session.set("name",t.body.name),e.$session.set("surname",t.body.surname),e.$session.set("score",t.body.score),e.$session.set("pseudo",t.body.pseudo),e.$store.commit("setLoginStatus",!0),e.$router.push("/"))})).catch((function(t){e.alertMessage="Email ou mot de passe incorrect",e.showDismissibleAlert=!0,console.error("Erreur lors de l'authentification",t)})):(this.alertMessage="Le formulaire est invalide",this.showDismissibleAlert=!0)},onSign:function(){var e=this;this.show?this.isFormValidS?R.newUser(JSON.stringify(this.form)).then((function(t){200===t.status&&(e.onReset(),e.alertMessage="Inscription réussie",e.showDismissibleAlert=!0)})).catch((function(t){console.error("Erreur lors de l'inscription",t),e.alertMessage="Erreur lors de l'inscription",e.showDismissibleAlert=!0})):(this.alertMessage="Le formulaire est invalide",this.showDismissibleAlert=!0):this.show=!0},onReset:function(){this.form.email="",this.form.password="",this.form.name="",this.form.surname="",this.form.pseudo="",this.show=!1}},computed:{isFormValid:function(){return""!=this.form.email&&""!=this.form.mdp},isFormValidS:function(){return""!=this.form.email&&""!=this.form.mdp&&""!=this.form.pseudo&&""!=this.form.name&&""!=this.form.surname}},beforeCreate:function(){this.$session.exists()&&this.$router.push("/")}},N=H,B=(s("4a07"),Object(d["a"])(N,L,M,!1,null,"32b27b7d",null)),V=B.exports,z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[e._v(" "+e._s(e.alertMessage)+" ")]),s("h1",[e._v("UPLOAD")]),e.loginStatus?s("div",{staticClass:"underTitle"},[s("p",[e._v("Ici, vous pouvez envoyer une image contenant une ordure qui sera analysé afin de déterminer sa nature, et augmentera votre score")]),s("br"),s("b-form",{on:{submit:function(t){return t.preventDefault(),e.sendImage()}}},[s("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:e.handlerFileUpload}}),s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Envoyer l'image")])],1),s("br"),s("img",{attrs:{id:"img"}}),s("text",{staticStyle:{visibility:"hidden"},attrs:{id:"b64"}}),s("br"),s("br"),s("b-overlay",{attrs:{show:e.show,rounded:"sm"}},[e.img?s("p",[e._v("Selon notre analyse, votre image correspond à "+e._s(e.img)+", ce choix correspond au probabilités suivantes :")]):e._e(),e.img?s("ul",[s("li",[e._v("Bouteille en plastique : "+e._s(100*e.imgData.proba.c_0)+"%")]),s("li",[e._v("Sac en plastique : "+e._s(100*e.imgData.proba.c_1)+"%")]),s("li",[e._v("Canette : "+e._s(100*e.imgData.proba.c_2)+"%")])]):e._e()])],1):s("div",{staticClass:"underTitle"},[s("p",[e._v("Vous devez être connecté pour accéder à cette fonctionnalité.")])])],1)},J=[],W={name:"Upload",data:function(){return{imgData:{},img:"",showDismissibleAlert:!1,alertMessage:"",show:!1}},computed:Object(l["a"])({},Object(u["b"])({loginStatus:"getLoginStatus"})),methods:{handlerFileUpload:function(){if(this.$refs.file&&this.$refs.file.files[0]){var e=new FileReader;e.addEventListener("load",(function(e){document.getElementById("img").src=e.target.result,document.getElementById("b64").value=e.target.result})),e.readAsDataURL(this.$refs.file.files[0])}},sendImage:function(){var e=this;this.show=!0,R.postImage(document.getElementById("b64").value,this.$session.get("pseudo")).then((function(t){e.imgData=t.body,e.image(),e.show=!1})).catch((function(t){e.show=!1,e.alertMessage="Erreur lors de l'envoi de l'image",e.showDismissibleAlert=!0,console.error("ERROR",t)}))},image:function(){"0"===this.imgData.class?this.img="une bouteille en plastique":"1"===this.imgData.class?this.img="un sac en plastique":this.img="une canette"}}},K=W,Q=(s("fc6f"),Object(d["a"])(K,z,J,!1,null,"3e8325cc",null)),G=Q.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-table",{attrs:{striped:"",hover:"",items:e.users,fields:e.fields,fixed:""}})],1)},Y=[],Z={name:"Classement",data:function(){return{fields:[{key:"pseudo",sortable:!0},{key:"nb_image_analysee",label:"Nombre d'images analysés",sortable:!0},{key:"score",sortable:!0}],users:[]}},created:function(){var e=this;R.getClassement().then((function(t){e.users=t.body.users})).catch((function(e){console.error("Erreur lors de la récupération du classement",e)}))}},ee=Z,te=Object(d["a"])(ee,X,Y,!1,null,null,null),se=te.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("h1",[e._v("STATISTIQUES")]),s("div",{staticClass:"underTitle"},[s("p",[e._v("Les données ci-dessous représentent les statistiques globales du site")]),s("p",[e._v("À ce jour, le site a analysé :")]),s("p",{staticClass:"image"},[e._v(e._s(e.stats.nb_image_analyser)+" images")]),s("p",[e._v("Parmis ces images, nous avons détecté :")]),s("ul",[s("li",[e._v(e._s(e.stats.class.nb_0)+" bouteilles en plastique")]),s("li",[e._v(e._s(e.stats.class.nb_1)+" sacs en plastique")]),s("li",[e._v(e._s(e.stats.class.nb_2)+" canettes")])])])])},ae=[],re={name:"Statistique",data:function(){return{stats:{nb_image_analyser:"",class:{nb_0:"",nb_1:"",nb_2:""}}}},created:function(){var e=this;R.getStatistics().then((function(t){e.stats=t.body})).catch((function(e){console.error("Erreur lors de la récupération des statistiques",e)}))}},ie=re,oe=(s("3329"),Object(d["a"])(ie,ne,ae,!1,null,"21b5be00",null)),le=oe.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("h1",[e._v("PROFILE")]),s("div",{staticClass:"underTitle"},[s("p",[e._v("Nom : "+e._s(e.name))]),s("p",[e._v("Prénom : "+e._s(e.surname))]),s("p",[e._v("Score : "+e._s(e.score))]),s("p",[e._v("E-mail : "+e._s(e.email))]),s("p",[e._v("Pseudo : "+e._s(e.pseudo))])])])},ce=[],me={name:"Profile",data:function(){return{name:"",surname:"",email:"",score:0,pseudo:""}},created:function(){this.name=this.$session.get("name"),this.surname=this.$session.get("surname"),this.email=this.$session.get("email"),this.score=this.$session.get("score"),this.pseudo=this.$session.get("pseudo")}},de=me,fe=(s("392e"),Object(d["a"])(de,ue,ce,!1,null,"fe25018e",null)),pe=fe.exports,he=s("28dd");n["default"].use(E["a"]),n["default"].use(he["a"]);var be=[{path:"/",name:"Home",component:I},{path:"/stats",name:"Statistique",component:le},{path:"/upload",name:"Upload",component:G},{path:"/classement",name:"Classement",component:se},{path:"/login",name:"Login",component:V},{path:"/profile",name:"Profile",component:pe},{path:"*",redirect:"/"}],ve=new E["a"]({mode:"history",base:"/",routes:be}),ge=ve;n["default"].use(u["a"]);var _e=new u["a"].Store({state:{loginStatus:!1},mutations:{setLoginStatus:function(e,t){e.loginStatus=t}},getters:{getLoginStatus:function(e){return e.loginStatus}}});s("f9e3"),s("2dd8");n["default"].config.productionTip=!1,n["default"].use(j.a),n["default"].use(D["a"]),new n["default"]({router:ge,store:_e,render:function(e){return e(O)}}).$mount("#app")},"85ec":function(e,t,s){},9357:function(e,t,s){"use strict";var n=s("1823"),a=s.n(n);a.a},a7e0:function(e,t,s){},a993:function(e,t,s){},abd7:function(e,t,s){"use strict";var n=s("a7e0"),a=s.n(n);a.a},d37f:function(e,t,s){"use strict";var n=s("36f4"),a=s.n(n);a.a},fc6f:function(e,t,s){"use strict";var n=s("a993"),a=s.n(n);a.a}});
//# sourceMappingURL=app.94b35f6b.js.map